(this["webpackJsonpwhere-is-waldo"]=this["webpackJsonpwhere-is-waldo"]||[]).push([[0],{17:function(e){e.exports=JSON.parse('{"waldo":{"0":"/static/media/waldo-0.16820e8e.jpg","1":"/static/media/waldo-1.3f1472be.jpg","2":"/static/media/waldo-2.5c12dff6.jpg","3":"/static/media/waldo-3.08c0df13.jpg","4":"/static/media/waldo-4.ea746537.jpg"},"pokemon":{"0":"/static/media/pokemon-0.fa9ae241.jpg"},"ghibli":{"0":"/static/media/ghibli-0.58f2fa63.jpg"}}')},30:function(e){e.exports=JSON.parse('{"waldo":"/static/media/icon-waldo.1cc63b52.png","wilma":"/static/media/icon-wilma.5aea612d.jpg","odlaw":"/static/media/icon-odlaw.f34b5260.jpg","azumarill":"/static/media/icon-azumarill.ce9151d2.png","charizard":"/static/media/icon-charizard.8ce84303.png","dodou":"/static/media/icon-dodou.63a4d88e.png","electivire":"/static/media/icon-electivire.74d6f67b.png","gardevoir":"/static/media/icon-gardevoir.12f93062.jpg","howl":"/static/media/icon-howl.986a1e42.png","ponyo":"/static/media/icon-ponyo.4d2cdab1.png"}')},36:function(e,t,a){},37:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),i=a(28),s=a.n(i),o=(a(36),a(37),a(5)),r=a(14),l=a(20);a(38),a(50);l.a.initializeApp({apiKey:"AIzaSyDFMDA7lTqwZUKyZ96rzBZ8tK8R3ERLAMk",authDomain:"where-is-waldo-2b09a.firebaseapp.com",projectId:"where-is-waldo-2b09a",storageBucket:"where-is-waldo-2b09a.appspot.com",messagingSenderId:"192340184477",appId:"1:192340184477:web:e6ece0defdafe7f9a2f374"});l.a.firestore(),l.a.auth();var d=l.a,u=a(1),j=function(e){var t=Object(c.useState)("guest"),a=Object(o.a)(t,2),n=(a[0],a[1],Object(c.useState)("main")),i=Object(o.a)(n,2),s=i[0],r=i[1];return"main"===s?Object(u.jsxs)("div",{className:"sign-in",children:[Object(u.jsx)("div",{className:"signIn-sideBar",children:Object(u.jsx)("button",{className:"signIn-special",onClick:e.hide,children:"\u274c"})}),Object(u.jsx)("button",{className:"sign-in-button",onClick:function(){if(!d.auth().currentUser.isAnonymous){d.auth().signOut(),console.log("not logged in -> Sign in as Guest (from SignIn)");var e=d.auth().signInAnonymously();e.then((function(e){return console.log("made a user!"),e.user.updateProfile({displayName:"Guest"})})),e.catch((function(e){return console.log(e)}))}},children:"Continue as Guest"}),Object(u.jsx)("button",{className:"sign-in-button",onClick:function(){return r("signUp")},children:"Sign Up"}),Object(u.jsx)("button",{className:"sign-in-button",onClick:function(){return r("logIn")},children:"Log In"})]}):"signUp"===s?Object(u.jsxs)("div",{className:"sign-in",children:[Object(u.jsxs)("div",{className:"signIn-sideBar",children:[Object(u.jsx)("button",{className:"signIn-special",onClick:e.hide,children:"\u274c"}),Object(u.jsx)("button",{className:"signIn-special",onClick:function(){return r("main")},children:"\ud83d\udd19"})]}),Object(u.jsx)("input",{type:"text",placeholder:"username",id:"signUp-username",maxLength:"14"}),Object(u.jsx)("input",{type:"email",placeholder:"fake-email@site.com",id:"signUp-email",maxLength:"20"}),Object(u.jsx)("input",{type:"password",placeholder:"password",id:"signUp-password",maxLength:"14"}),Object(u.jsx)("button",{className:"sign-in-button",onClick:function(){var e=document.querySelector("#signUp-username"),t=document.querySelector("#signUp-email"),a=document.querySelector("#signUp-password"),c=d.auth().createUserWithEmailAndPassword(t.value,a.value);c.then((function(t){return t.user.updateProfile({displayName:e.value})})),c.catch((function(e){return alert(e)}))},children:"Create Account"})]}):Object(u.jsxs)("div",{className:"sign-in",children:[Object(u.jsxs)("div",{className:"signIn-sideBar",children:[Object(u.jsx)("button",{className:"signIn-special",onClick:e.hide,children:"\u274c"}),Object(u.jsx)("button",{className:"signIn-special",onClick:function(){return r("main")},children:"\ud83d\udd19"})]}),Object(u.jsx)("input",{type:"email",placeholder:"your-email@site.com",id:"logIn-email"}),Object(u.jsx)("input",{type:"password",placeholder:"password",id:"logIn-password"}),Object(u.jsx)("button",{className:"sign-in-button",onClick:function(){var e=document.querySelector("#logIn-email"),t=document.querySelector("#logIn-password");d.auth().signInWithEmailAndPassword(e.value,t.value).catch((function(e){return alert(e)}))},children:"Log In"})]})},b=function(e){var t=Object(c.useState)("Guest"),a=Object(o.a)(t,2),n=a[0],i=a[1],s=Object(c.useState)(!1),l=Object(o.a)(s,2),b=l[0],m=l[1],h=function(){m(!b)};return d.auth().onAuthStateChanged((function(e){e&&i(d.auth().currentUser.displayName)})),Object(u.jsxs)("div",{className:"navbar",children:[Object(u.jsxs)("div",{className:"navbar-group",children:[Object(u.jsx)("h2",{children:n}),Object(u.jsx)("button",{className:"nav-sign navbar-element",onClick:h,children:"Sign In"})]}),Object(u.jsxs)("div",{className:"navbar-group",children:[Object(u.jsx)(r.b,{to:"/leaderboard",children:Object(u.jsx)("h2",{className:"navbar-element",children:"\ud83c\udfc6"})}),Object(u.jsx)(r.b,{to:"/",children:Object(u.jsx)("h2",{className:"navbar-element",children:"\ud83c\udfe0"})})]}),!0===b?Object(u.jsx)(j,{hide:h,setUser:function(e){return i(e)}}):null]})},m=a(6),h=(a(46),function(e){return Object(u.jsxs)("div",{className:"levelBar",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h2",{className:"levelBar-title",children:e.title})}),Object(u.jsx)("div",{className:"levelBar-images",children:e.images.map((function(t,a){return Object(u.jsx)(r.b,{to:"game/".concat(e.title,"-").concat(a),children:Object(u.jsx)("img",{src:t,alt:e.title+"-"+a,id:"thumbnail-"+e.title+"-"+a},a)},a)}))})]})}),g=a.p+"static/media/waldo-0.16820e8e.jpg",p=a.p+"static/media/waldo-1.3f1472be.jpg",O=a.p+"static/media/waldo-2.5c12dff6.jpg",f=a.p+"static/media/waldo-3.08c0df13.jpg",x=a.p+"static/media/waldo-4.ea746537.jpg",v=a.p+"static/media/pokemon-0.fa9ae241.jpg",N=a.p+"static/media/ghibli-0.58f2fa63.jpg",w=function(e){var t=[g,p,O,f,x],a=[v],c=[N];return Object(u.jsxs)("div",{className:"page-home",children:[Object(u.jsx)(h,{title:"waldo",images:t}),Object(u.jsx)(h,{title:"pokemon",images:a}),Object(u.jsx)(h,{title:"ghibli",images:c})]})},S=a(31),y=(a(47),a(17)),I=a(30),k=(a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,function(e){var t=Object(c.useState)({left:"0",top:"0"}),a=Object(o.a)(t,2),n=a[0],i=a[1];Object(c.useEffect)((function(){i({left:"".concat(e.coordinates[0],"px"),top:"".concat(e.coordinates[1],"px"),visibility:"visible"})}),[e]);var s=function(t){console.log(t.currentTarget.getAttribute("data-char")),e.sendClick(t.currentTarget.getAttribute("data-char"))};return Object(u.jsx)("div",{className:"dropdown",style:n,children:e.char.map((function(e){return Object(u.jsxs)("div",{"data-char":e,onClick:s,children:[Object(u.jsx)("img",{src:I[e],alt:e})," ",Object(u.jsx)("h3",{children:e})]},e)}))})}),C=function(e){var t=Object(c.useState)("00"),a=Object(o.a)(t,2),n=a[0],i=a[1],s=Object(c.useState)("00"),r=Object(o.a)(s,2),l=r[0],d=r[1],j=Object(c.useState)(!0),b=Object(o.a)(j,2),m=b[0],h=b[1],g=Object(c.useState)(0),p=Object(o.a)(g,2),O=p[0],f=p[1];return Object(c.useEffect)((function(){var e;return m&&(e=setInterval((function(){var e=O%60,t=Math.floor(O/60),a=1===String(e).length?"0".concat(e):e,c=1===String(t).length?"0".concat(t):t;i(a),d(c),f((function(e){return e+1}))}),1e3)),function(){return clearInterval(e)}}),[m,O]),Object(c.useEffect)((function(){!0===e.gameOver?(e.sendCounter(O),h(!1)):h(!0)}),[e]),Object(u.jsxs)("div",{className:"timer",children:[Object(u.jsx)("span",{className:"minute",children:l}),Object(u.jsx)("span",{children:":"}),Object(u.jsx)("span",{className:"second",children:n})]})},U=function(e){var t=Object(m.f)("/game/:id").url.split("/"),a=(t=t[t.length-1]).split("-"),n=Object(o.a)(a,2),i=n[0],s=n[1],r=y[i][s],l=Object(c.useState)([]),j=Object(o.a)(l,2),b=j[0],h=j[1],g=Object(c.useState)([]),p=Object(o.a)(g,2),O=p[0],f=p[1],x=Object(c.useState)([0,0]),v=Object(o.a)(x,2),N=v[0],w=v[1],I=Object(c.useState)([0,0]),U=Object(o.a)(I,2),E=U[0],A=U[1],B=Object(c.useState)(!1),M=Object(o.a)(B,2),L=M[0],P=M[1],z=Object(c.useState)(!1),T=Object(o.a)(z,2),q=T[0],G=T[1],F=Object(c.useState)(0),Y=Object(o.a)(F,2),D=Y[0],J=Y[1];Object(c.useEffect)((function(){d.firestore().collection("gameCoordinates").doc(t).get().then((function(e){h(e.data()),f(Object.keys(e.data())),P(!0)})),setTimeout((function(){G(!0)}),354e4)}),[]),Object(c.useEffect)((function(){0===O.length&&!0===L&&G(!0)}),[O,L]);return Object(u.jsxs)("div",{className:"page-game",children:[Object(u.jsx)("div",{className:"space-div"}),Object(u.jsx)("img",{className:"game-image",src:r,alt:"game",onClick:function(e){var t=e.nativeEvent.offsetX,a=e.nativeEvent.offsetY,c=e.target.clientWidth,n=e.target.clientHeight;w([Math.round(100*t/c),Math.round(100*a/n)]),A([e.pageX,e.pageY])}}),0!==O.length?Object(u.jsx)(k,{coordinates:E,char:O,sendClick:function(e){if(function(e){return"waldo"===i?Math.abs(N[0]-e[0])<3.5&&Math.abs(N[1]-e[1])<3.5:Math.abs(N[0]-e[0])<4&&Math.abs(N[1]-e[1])<4}(b[e])){console.log("Yay! You found ",e);var t=Object(S.a)(O);t=t.filter((function(t){return t!==e})),f(t)}}}):null,Object(u.jsx)(C,{gameOver:q,sendCounter:function(e){0===D&&(J(e),d.firestore().collection("scores").doc(t).collection("playerScores").add({username:d.auth().currentUser.displayName,time:e,uid:d.auth().currentUser.uid}).then((function(e){console.log("High score saved ",e)})).catch((function(e){console.error("Error writing in score",e)})))}})]})},E=(a(48),function(e){var t=Object.keys(y),a=Object(c.useState)("waldo"),n=Object(o.a)(a,2),i=n[0],s=n[1],r=Object(c.useState)("0"),l=Object(o.a)(r,2),j=l[0],b=l[1],m=Object(c.useState)(y.waldo),h=Object(o.a)(m,2),g=h[0],p=h[1],O=Object(c.useState)([]),f=Object(o.a)(O,2),x=f[0],v=f[1],N=Object(c.useState)([]),w=Object(o.a)(N,2),S=w[0],I=w[1],k=Object(c.useState)([-1,-1]),C=Object(o.a)(k,2),U=C[0],E=C[1];return Object(c.useEffect)((function(){var e=[],t=function(t){var a=Object(u.jsx)("img",{src:g[t],alt:"".concat(i,"-").concat(t),"data-level":"".concat(i,"-").concat(t),onClick:function(){b(t)}},t);e.push(a)};for(var a in g)t(a);v(e)}),[g,i]),Object(c.useEffect)((function(){var e=[];d.firestore().collection("scores").doc("".concat(i,"-").concat(j)).collection("playerScores").get().then((function(t){t.forEach((function(t){e.push(t.data())})),e=e.sort((function(e,t){return e.time>t.time?1:-1})),I(e)}))}),[j,i]),Object(c.useEffect)((function(){for(var e=-1,t=-1,a=0;a<S.length&&-1===e;a++)S[a].uid&&S[a].uid===d.auth().currentUser.uid&&(e=S[a].time,t=a);E([e,t])}),[S]),Object(u.jsxs)("div",{className:"page-leaderboard",children:[Object(u.jsx)("div",{className:"space-div"}),Object(u.jsx)("div",{className:"leaderboard-types",children:t.map((function(e){return Object(u.jsx)("button",{"data-type":e,onClick:function(){s(e),b("0"),p(y[e])},children:e},e)}))}),Object(u.jsx)("div",{className:"leaderboard-levels",children:x.map((function(e){return e}))}),Object(u.jsxs)("div",{className:"leaderboard-board",children:[Object(u.jsx)("h2",{children:"".concat(i,"-").concat(j)}),-1!==U[0]?Object(u.jsx)("h3",{children:"Your high score: ".concat(U[0],". Place: #").concat(U[1]+1)}):null,Object(u.jsx)("br",{}),Object(u.jsx)("table",{children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"leaderboad-left",children:"Name"}),Object(u.jsx)("th",{className:"leaderboad-right",children:"Score"})]}),S.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"leaderboad-left",children:e.username}),Object(u.jsx)("td",{className:"leaderboad-right",children:e.time})]},t)}))]})})]})]})});var A=function(){return Object(c.useEffect)((function(){console.log("my user at start: ",d.auth().currentUser),setTimeout((function(){if(console.log("my user at start -2: ",d.auth().currentUser),d.auth().currentUser)console.log("I am already logged in");else{console.log("not logged in -> Sign in as Guest");var e=d.auth().signInAnonymously();e.then((function(e){return console.log("made a user!"),e.user.updateProfile({displayName:"Guest"})})),e.catch((function(e){return console.log(e)}))}}),1e3)}),[]),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(r.a,{children:[Object(u.jsx)(b,{}),Object(u.jsxs)(m.c,{children:[Object(u.jsx)(m.a,{exact:!0,path:"/",component:w}),Object(u.jsx)(m.a,{exact:!0,path:"/game/:id",component:function(){return Object(u.jsx)(U,{})}}),Object(u.jsx)(m.a,{exact:!0,path:"/leaderboard",component:E})]})]})})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),i(e),s(e)}))};s.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),B()}},[[49,1,2]]]);
//# sourceMappingURL=main.35cd9a43.chunk.js.map